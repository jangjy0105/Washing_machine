# Atmega128 세탁기 프로젝트

---

### 사용 기술
- **C**
- **AVR** (Atmega128A)

---

## 1. 개요
- **Atmega128A** MCU를 활용하여 세탁기의 핵심 동작을 제어하는 임베디드 시스템을 구현했습니다.
- **DC 모터**의 정회전/역회전 제어를 통해 실제 세탁 동작을 구현했습니다.
- **LED**와 **FND**를 사용하여 현재 진행 과정(세탁, 헹굼, 탈수)과 남은 시간을 직관적으로 표시합니다.
- **Buzzer**를 통해 사용자에게 동작 상태를 효과음으로 알립니다.
- 시스템의 모든 딜레이(Delay)는 **타이머 인터럽트**로 처리하여, 여러 기능이 동시에 수행되어도 안정적인 동작을 보장합니다.

---

## 2. 시스템 구성
<img width="587" height="317" alt="noname01" src="https://github.com/user-attachments/assets/c6b21c18-59fd-4438-9ed1-f1dcf1955c49" />

---

## 3. 개발 및 구현 내용

### 1) DC 모터 제어
- **세탁 동작**: DC 모터의 정회전과 역회전을 반복하여 세탁조의 움직임을 구현했습니다.
- **강도 조절**: '강', '중', '약' 세 가지 세탁 강도에 따라 DC 모터의 회전 속도(PWM)를 다르게 제어합니다.
- **과정별 제어**: 세탁, 헹굼, 탈수 각 과정의 특성에 맞게 모터의 동작 방식을 다르게 제어합니다.

### 2) FND (7-Segment) 표시
- **듀얼 디스플레이**: 두 개의 FND를 사용하여 `현재 과정의 남은 시간`과 `전체 남은 시간`을 동시에 표시합니다.
- **애니메이션**: FND의 첫 번째 자리를 활용하여 동작 상태를 시각적으로 표현하는 애니메이션을 디스플레이합니다.
- **안정성**: 타이머 인터럽트를 이용한 다이나믹 디스플레이 방식으로 잔상 없이 선명하게 표시되도록 구현했습니다.

### 3) 버튼 입력 처리
- **사용자 설정**: 버튼 입력을 통해 `세탁 모드`, `세탁 시간`, `헹굼 횟수`, `탈수 시간`을 사용자가 직접 설정할 수 있습니다.
- **디바운싱**: 타이머 인터럽트를 활용하여 버튼 채터링(Chattering)으로 인한 오작동을 방지하는 디바운싱(Debouncing) 로직을 구현했습니다.

### 4) 버저(Buzzer) 제어
- **상태 알림**: 전원 ON/OFF 시 알림음, 버튼 입력 시 피드백 사운드를 재생합니다.
- **완료 알림**: 모든 세탁 과정이 완료되면 멜로디를 재생하여 종료를 알립니다.
- **정밀 제어**: 타이머 인터럽트를 사용하여 정확한 음계와 박자로 멜로디를 재생합니다.

### 5) LED 표시
- **과정 표시**: `세탁`, `헹굼`, `탈수` 각 과정에 해당하는 LED를 점등하여 현재 상태를 명확하게 표시합니다.
- **완료 표시**: 세탁 완료 시 모든 과정 LED가 깜빡이며(Blink) 종료되었음을 알립니다.

---

## 4. 결과 및 시연 영상
- [시연영상](https://www.youtube.com/watch?v=xOCPP_fHVWs)

---

## 5. 결론 및 시사점
- **안정적인 시스템 구현**: **타이머 인터럽트**를 적극적으로 활용하여 다수의 기능이 동시에 처리될 때 발생할 수 있는 시간 충돌 문제를 해결하고 안정적인 시스템을 구현했습니다.
- **개선 필요 사항**:
    - **인터럽트 서비스 루틴(ISR) 최적화**: 일부 타이머 인터럽트 서비스 루틴의 길이가 길어, 향후 더 짧고 효율적으로 개선할 필요가 있습니다.
    - **코드 가독성 향상**: 현재 코드가 다소 복잡하여, **구조체(struct)** 및 **함수 포인터 배열** 등을 활용하여 보다 깔끔하고 가독성 좋은 코드로 리팩토링할 계획입니다.
